# Aura - 占卜与情感陪伴App（MVP版）

## 📱 项目简介

Aura是一款温暖治愈的占卜与情感陪伴应用，为用户提供个性化的占卜服务和情感支持。应用集成了生辰八字、紫微斗数、占星学和塔罗牌等多种占卜知识体系，通过AI技术提供智能化的占卜解读和情感陪伴。

## ✨ 核心功能

### 🎯 新手引导系统
- **个人信息收集**：昵称、性别、生日、出生地
- **陪伴形象选择**：星语者·小满 / 云游道士·青阳
- **跳过引导**：可直接跳转到注册登录
- **信息验证**：完整的表单验证和用户体验优化

### 🔐 注册登录系统
- **多方式登录**：支持手机号和邮箱两种登录方式
- **国际化支持**：国际区号选择，支持全球用户
- **Mock验证**：开发阶段支持任意6位验证码登录
- **一键切换**：登录和注册页面无缝切换

### 💬 AI智能对话
- **陪伴形象个性化**：根据选择的形象（小满/青阳）提供不同风格的对话
- **智能开场白**：基于用户信息生成个性化开场消息
- **意图识别**：识别占卜、焦虑、情感、事业等不同需求
- **知识整合**：集成生辰八字、紫微斗数、占星、塔罗四大知识体系

### 🔮 塔罗占卜系统
- **随机抽卡**：从22张大阿尔卡纳中随机抽取
- **3D动画**：精美的翻牌动画效果
- **个性化解读**：结合用户信息提供专属解读
- **深层洞察**：多维度的占卜建议和指导

### 👤 个人资料管理
- **用户信息展示**：显示昵称、星座等基本信息
- **陪伴形象展示**：显示所选择的占卜师形象

## 🚀 快速开始

### 环境要求
- Flutter SDK 3.32.7+
- Dart 3.8.1+
- Android Studio / VS Code
- Android SDK / iOS SDK

### 安装依赖
```bash
flutter pub get
```

### 启动命令

#### 完整体验（包含新手引导）
```bash
# Android
flutter run -d emulator-5554 --debug

# Chrome
flutter run -d chrome --debug
```

#### 开发模式（跳过认证）
```bash
# Android
flutter run -d emulator-5554 --debug --dart-define=SKIP_AUTH=true

# Chrome  
flutter run -d chrome --debug --dart-define=SKIP_AUTH=true
```

## 🎨 设计理念

### 视觉风格
- **温暖治愈**：采用温和的色彩搭配，营造安全舒适的氛围
- **非神秘化**：避免传统占卜的神秘色彩，更贴近现代用户
- **个性化体验**：根据用户选择提供差异化的视觉和交互体验

### 交互设计
- **渐进式引导**：步骤化的信息收集，降低用户负担
- **情感共鸣**：通过陪伴形象建立情感连接
- **智能响应**：基于用户状态和需求的个性化回复

## 📦 技术架构

### 前端技术栈
- **Flutter**: 跨平台移动应用开发框架
- **Dart**: 编程语言
- **Provider**: 状态管理
- **Material Design**: UI设计语言

### 核心模块
- **Authentication**: 注册登录系统
- **Onboarding**: 新手引导流程
- **AI Chat Service**: 智能对话服务
- **Divination Knowledge**: 占卜知识库
- **User Management**: 用户信息管理

### 依赖包
```yaml
dependencies:
  flutter: sdk
  provider: ^6.1.1
  go_router: ^12.1.3
  country_picker: ^2.0.25
  email_validator: ^2.1.17
  intl: ^0.19.0
  lottie: ^2.7.0
  # ... 更多依赖
```

## 🎭 陪伴形象介绍

### 星语者·小满
- **性格特点**：温柔智慧，善于倾听
- **专长领域**：情感占卜与心灵指导
- **话语风格**：温暖亲切，细腻体贴
- **适合用户**：需要情感支持和温暖陪伴的用户

### 云游道士·青阳  
- **性格特点**：飘逸洒脱，智慧深邃
- **专长领域**：易经八卦与命理推演
- **话语风格**：古风雅致，哲理深刻
- **适合用户**：喜欢传统文化和深度思考的用户

## 📱 使用流程

### 新用户体验
1. **启动应用** → 进入欢迎页面
2. **新手引导** → 填写基本信息（可跳过）
3. **选择陪伴形象** → 星语者·小满 或 云游道士·青阳
4. **完成引导** → 直接进入对话界面
5. **开始对话** → 享受个性化的占卜体验

### 核心功能使用
- **聊一聊**：与AI占卜师进行深度对话
- **抽一卦**：通过塔罗牌获得指导建议
- **我的**：查看和管理个人信息

## 🔧 开发调试

### 调试命令
详见 [DEBUG_COMMANDS.md](DEBUG_COMMANDS.md) 文件，包含：
- 各平台启动命令
- 问题排查方法
- NDK配置解决方案
- 功能使用指南

### 常见问题
1. **NDK配置错误**：已在build配置中禁用NDK
2. **国家选择器问题**：已优化搜索和选择逻辑
3. **布局溢出问题**：已修复心情选择页面的布局问题
4. **陪伴形象图片不显示**：已优化资源配置，确保persona图片正确加载
5. **导航逻辑问题**：已修复新手引导完成后的跳转逻辑，确保用户进入登录页面

### 最近修复
#### v1.0.1 (2024-12-19)
- ✅ **修复陪伴形象图片显示问题**
  - 问题：聊天形象选择界面无法显示正确的persona图片
  - 解决：在pubspec.yaml中明确配置了assets/images/persona/路径
  - 影响：星语者·小满和云游道士·青阳的头像现在可以正常显示

- ✅ **修复新手引导导航逻辑**
  - 问题：点击"完成"后直接进入主界面，跳过了登录验证
  - 解决：修改了_onOnboardingCompleted方法，确保所有用户都需要登录验证
  - 影响：完成新手引导后会正确跳转到登录注册页面，提升用户体验流程

## 📈 版本更新

### v1.0.1 (当前版本)
- ✅ 完整的新手引导流程
- ✅ 陪伴形象选择功能（已修复图片显示问题）
- ✅ 多方式注册登录
- ✅ AI智能对话系统
- ✅ 塔罗占卜功能
- ✅ 个性化用户体验
- ✅ 优化的用户流程和导航逻辑

### v1.0.0 (初始版本)
- ✅ 基础的新手引导流程
- ✅ 陪伴形象选择功能
- ✅ 多方式注册登录
- ✅ AI智能对话系统
- ✅ 塔罗占卜功能

### 计划功能
- 📅 更多占卜方式（生辰八字、紫微斗数等）
- 📅 历史记录和收藏功能
- 📅 社区分享功能
- 📅 多语言支持
- 📅 个性化主题设置

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

---

💫 **用心创造，温暖陪伴** - Aura团队 